<script type="text/javascript" id="tutorialScript">
  GEPPETTO.on(GEPPETTO.Events.Project_persisted, function() {
      $('.tutorialForm input, .tutorialForm button').prop('disabled', false);
  });

  if (!Project.persisted) {
      $('.tutorialForm input, .tutorialForm button').prop('disabled', true);
  }
</script>

<div>

In this step we'll work with a voltage clamp instead of a current clamp. 
With a voltage clamp a variable current is injected into the compartment in order to keep the voltage successively at three constant levels: a conditioning level, a testing level and a return level.

	<div class="tutorialForm center">
		<div class="tutorialLabel">Delay (ms)</div> <input id="clampDelay" type="text" value="10"></input>
		<div class="tutorialLabel">Duration (ms)</div> <input id="clampDuration" type="text" value="30"></input>
		<div class="tutorialLabel">Conditioning voltage (mV)</div> <input id="clampConditioning" type="text" value="-63.77"></input>
		<div class="tutorialLabel">Testing voltage (mV)</div> <input id="clampTesting" type="text" value="10"></input>
		<div class="tutorialLabel">Return voltage (mV)</div> <input id="clampReturn" type="text" value="-63.77"></input>
		<div class="tutorialLabel">Simple Series Resistance (ohm)</div> <input id="clampRes" type="text" value="10000"></input>
		<div class="tutorialLabel">k conductance density (S/cm<sup>2</sup>)</div> <input id="kValue" type="text" value="0.036"></input>
		<div class="tutorialLabel">na conductance density (S/cm<sup>2</sup>)</div> <input id="naValue" type="text" value="0.12"></input>
		<button class="btn" id="changeCurrent" onclick="quickExperiment('VClamp',
			{
				_delay:{'Model.neuroml.hhneuron.vClamp.delay':$('#clampDelay').val()},
				_vActive:{'Model.neuroml.hhneuron.vClamp.active':1},
				_IDuration:{'Model.neuroml.hhneuron.IClamp.duration':0},
				condV:{'Model.neuroml.hhneuron.vClamp.conditioningVoltage':$('#clampConditioning').val()},
				testingV:{'Model.neuroml.hhneuron.vClamp.testingVoltage':$('#clampTesting').val()},
				returnV:{'Model.neuroml.hhneuron.vClamp.returnVoltage':$('#clampReturn').val()},
				duration:{'Model.neuroml.hhneuron.vClamp.duration':$('#clampDuration').val()},
				res:{'Model.neuroml.hhneuron.vClamp.simpleSeriesResistance':$('#clampRes').val()},
				k:{'Model.neuroml.hhneuron.biophysics.membraneProperties.kChans.condDensity':$('#kValue').val()},
				na:{'Model.neuroml.hhneuron.biophysics.membraneProperties.naChans.condDensity':$('#naValue').val()}
			}
		);">Try!</button>
	</div>
<div style="float:left">
	Try to step the voltage from resting potential (in this case, -63.77 mV) to a testing level of -10 mV for 30 ms. 
	You will notice four distinct currents during the course of the simulation:

	<ul>
		<li>A very brief positive spike at the onset of the voltage change. This is the capacitive current that is related to charging the membrane capacitance.</li>
		<li>A negative peak that represents the extra current needing to be injected to counteract the inward current through the fast sodium channels and hold the voltage constant.</li>
		<li>A sustained positive (outward) current in response to the increased potassium conductance. </li>
		<li>A smaller transient current after the voltage clamp returns to resting membrane potential. There is an instantaneous change in the driving force the current through the potassium channels experiences, and the gates in channels gradually close at this membrane potential.</li>
	</ul>
</div>
</div>
